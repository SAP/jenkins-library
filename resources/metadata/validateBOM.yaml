metadata:
  name: validateBOM
  description: Validates Software Bill of Materials (SBOM/BOM) files for compliance and security
  longDescription: |-
    Validates Software Bill of Materials (SBOM/BOM) files generated by build steps such as mtaBuild, kanikoExecute, and others.

    This step finds BOM files based on a glob pattern, validates their format (CycloneDX 1.4), and extracts Package URL (PURL) information.
    By default, validation failures are logged as warnings without failing the build, but this can be configured to enforce strict validation.

    The step silently succeeds if no BOM files are found, making it safe to run unconditionally in all pipelines.
spec:
  inputs:
    params:
      - name: bomPattern
        type: string
        description: Glob pattern to find BOM files to validate
        mandatory: false
        scope:
          - PARAMETERS
          - STAGES
          - STEPS
        default: "**/bom-*.xml"
      - name: failOnValidationError
        type: bool
        description: Whether to fail the build if BOM validation fails
        mandatory: false
        scope:
          - PARAMETERS
          - STAGES
          - STEPS
        default: false
      - name: validatePurl
        type: bool
        description: Whether to extract and log Package URL (PURL) information from valid BOMs
        mandatory: false
        scope:
          - PARAMETERS
          - STAGES
          - STEPS
        default: true
      - name: skip
        type: bool
        description: Skip validation entirely (allows users to opt-out)
        mandatory: false
        scope:
          - PARAMETERS
          - STAGES
          - STEPS
        default: false
