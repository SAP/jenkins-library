metadata:
  name: getPackageList
  description: Get the names of all packages in a tenant
  longDescription: |
    With this step you can obtain information about the service endpoints exposed by SAP BTP Integration on a tenant using OData API. Learn more about the SAP Cloud Integration remote API for getting service endpoint of deployed integration artifact [here](https://help.sap.com/viewer/368c481cd6954bdfa5d0435479fd4eaf/Cloud/en-US/d1679a80543f46509a7329243b595bdb.html).

spec:
  inputs:
    secrets:
      - name: cpiApiServiceKeyCredentialsId
        description: Jenkins secret text credential ID containing the service key to the Process Integration Runtime service instance of plan 'api'
        type: jenkins
    params:
      - name: apiServiceKey
        type: string
        description: Service key JSON string to access the Process Integration Runtime service instance of plan 'api'
        scope:
          - PARAMETERS
        mandatory: true
        secret: true
        resourceRef:
          - name: cpiApiServiceKeyCredentialsId
            type: secret
            param: apiServiceKey
  outputs:
    resources:
      - name: commonPipelineEnvironment
        type: piperEnvironment
        params:
          - name: custom/integrationPackageList
          - name: custom/integrationArtifactList
