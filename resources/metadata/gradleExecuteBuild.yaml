metadata:
  name: gradleExecuteBuild
  description: This step runs a gradle build command with parameters provided to the step.
  longDescription: This step runs a gradle build command with parameters provided to the step.
spec:
  inputs:
    params:
      - name: path
        aliases:
          - name: buildGradlePath
            deprecated: false
        type: string
        description: Path to the folder with gradle.build file which should be executed.
        scope:
          - PARAMETERS
          - STAGES
          - STEPS
        mandatory: false
      - name: task
        type: string
        description: Gradle task that should be executed.
        scope:
          - PARAMETERS
          - STAGES
          - STEPS
        mandatory: false
        default: build
      - name: publish
        type: bool
        description: Configures gradle to publish the artifact to a repository.
        scope:
          - STEPS
          - STAGES
          - PARAMETERS
        default: false
      - name: repositoryUrl
        type: string
        description: Url to the repository to which the project artifacts should be published.
        scope:
          - GENERAL
          - PARAMETERS
          - STAGES
          - STEPS
        resourceRef:
          - name: commonPipelineEnvironment
            param: custom/repositoryUrl
      - name: repositoryPassword
        type: string
        description: Password for the repository to which the project artifacts should be published.
        scope:
          - GENERAL
          - PARAMETERS
          - STAGES
          - STEPS
        secret: true
        resourceRef:
          - name: commonPipelineEnvironment
            param: custom/repositoryPassword
      - name: repositoryUsername
        type: string
        description: Username for the repository to which the project artifacts should be published.
        scope:
          - GENERAL
          - PARAMETERS
          - STAGES
          - STEPS
        secret: true
        resourceRef:
          - name: commonPipelineEnvironment
            param: custom/repositoryUsername
  containers:
    - name: gradle
      image: gradle:6-jdk11-alpine
