metadata:
    name: abapAddonAssemblyKitCreateTargetVector
    description: This step creates a Target Vector for SPC
    longDescription: |
      This step takes the Product Version and the corresponding list of Software Component Versions from the addonDescriptor in the commonPipelineEnvironment.
      With these it creates a Target Vector, which is necessary for executing the software change in ABAP Cloud Platform systems with help of the Software Provider Cockpit (SPC).
      It describes the software state, which shall be reached in the managed ABAP Cloud Platform system.
spec:
  inputs:
    secrets:
      - name: abapAddonAssemblyKitCredentialsId
        description: Credential stored in Jenkins for Addon Assembly Kit as a Service System (AAKaaS)
        type: jenkins
    params:
      - name: abapAddonAssemblyKitEndpoint
        type: string
        description: Base URL to the Addon Assembly Kit as a Service System (AAKaaS)
        scope:
          - PARAMETERS
          - STAGES
          - STEPS
          - GENERAL
        mandatory: true
      - name: username
        type: string
        description: User for the Addon Assembly Kit as a Service System (AAKaaS)
        scope:
          - PARAMETERS
          - STAGES
          - STEPS
        mandatory: true
        secret: true
      - name: password
        type: string
        description: Password the Addon Assembly Kit as a Service System (AAKaaS)
        scope:
        - PARAMETERS
        - STAGES
        - STEPS
        mandatory: true
        secret: true
      - name: addonDescriptor
        type: string
        description: File name of the YAML file which describes the Product Version and corresponding Software Component Versions
        mandatory: true
        scope:
          - PARAMETERS
          - STAGES
          - STEPS
        resourceRef:
          - name: commonPipelineEnvironment
            param: abap/addonDescriptor
  outputs:
    resources:
      - name: commonPipelineEnvironment
        type: piperEnvironment
        params:
          - name: abap/addonDescriptor
