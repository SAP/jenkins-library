import groovy.transform.Field

@Field String STEP_NAME = getClass().getName()

void call(Map parameters = [:]) {

    handlePipelineStepErrors (stepName: STEP_NAME, stepParameters: parameters) {

        def cred = [
            type: 'usernamePassword',
            id: 'credentialsId',
            env: ['PIPER_user', 'PIPER_password']
        ]

        piperExecuteBin parameters, STEP_NAME, 'metadata/malwareScan.yaml', [cred]
    }
}

